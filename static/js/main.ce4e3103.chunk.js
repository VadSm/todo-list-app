(this["webpackJsonptodo-list-app"]=this["webpackJsonptodo-list-app"]||[]).push([[0],{41:function(e,t,a){e.exports=a(70)},46:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),i=a.n(r),l=(a(46),a(6)),o=a(15),u=a(38),s=a(21),d=a(4),m=function(e){return{type:"SET_LOADING",payload:e}},f={tasks:[],isLoading:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_TODO":return Object(d.a)({},e,{tasks:[].concat(Object(s.a)(e.tasks),[n])});case"EDIT_TODO":return Object(d.a)({},e,{tasks:e.tasks.map((function(e){var t=n.id,a=n.newValue;return e.id===t?Object(d.a)({},e,{title:a}):e}))});case"DELETE_TODO":return Object(d.a)({},e,{tasks:e.tasks.filter((function(e){return e.id!==n}))});case"TOGGLE_COMPLETED":return Object(d.a)({},e,{tasks:e.tasks.map((function(e){return e.id===n?Object(d.a)({},e,{completed:!e.completed}):e}))});case"TOGGLE_ALL_TODOS_COMPLETED":return Object(d.a)({},e,{tasks:e.tasks.map((function(e){return Object(d.a)({},e,{completed:n})}))});case"DELETE_ALL_COMPLETED":return Object(d.a)({},e,{tasks:e.tasks.filter((function(e){return!e.completed}))});case"SET_LOADING":return Object(d.a)({},e,{isLoading:n});case"SAVE_TODOS":return Object(d.a)({},e,{tasks:n});default:return e}},E={isSortedByPriority:!1,activePriorityFilter:""},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"TOGGLE_SORTING_BY_PRIORITY":return Object(d.a)({},e,{isSortedByPriority:!e.isSortedByPriority});case"SET_ACTIVE_PRIORITY_FILTER":return Object(d.a)({},e,{activePriorityFilter:n});default:return e}},O=Object(o.c)({todos:p,filters:b}),v=Object(o.e)(O,Object(o.d)(Object(o.a)(u.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),y=a(19),j=a(14),h=a(20),k=(a(51),c.a.memo((function(){return c.a.createElement("header",{className:"app-header"},c.a.createElement("h2",null,"My tasks"))}))),g=a(22),N=function(e){return e.todos.tasks},T=function(e){return e.filters.isSortedByPriority},_=function(e){return e.filters.activePriorityFilter},C=Object(g.a)(N,(function(e){return e.filter((function(e){return!e.completed})).length})),D=Object(g.a)(N,T,(function(e,t){return t?Object(s.a)(e).sort((function(e,t){var a={low:1,medium:2,high:3};return a[t.priority]-a[e.priority]})):e})),L=Object(g.a)(D,_,(function(e,t){return t?e.filter((function(e){return e.priority===t})):e})),S=a(39),I=a.n(S).a.create({baseURL:"http://localhost:9000/"}),w={getTodos:function(){return I.get("all")},createTodo:function(e){return I.post("create",e)},deleteTodo:function(e){return I.delete("delete/".concat(e))},updateTodo:function(e){return I.put("update",e)},updateAllStatuses:function(e){return I.put("updateAllStatuses/".concat(e))},deleteAllCompleted:function(){return I.delete("deleteAllCompleted")}},A=function(e,t,a){e(m(!0)),t().then(a).catch((function(e){var t=e.message;return h.b.error("Error: ".concat(t))})).finally((function(){return e(m(!1))}))},P=a(10),G=a(13),R=c.a.memo((function(e){var t=e.className,a=void 0===t?"":t,n=e.placeholder,r=Object(G.a)(e,["className","placeholder"]);return c.a.createElement("div",{className:"custom-input ".concat(a)},c.a.createElement("input",Object.assign({required:!0},r)),n&&c.a.createElement("span",{className:"placeholder"},n))})),V=c.a.memo((function(e){var t=e.options,a=e.defaultValue,r=e.onChange,i=e.className,l=Object(G.a)(e,["options","defaultValue","onChange","className"]),o=a||t.length>0&&t[0].title||"Choose",u=Object(n.useState)(!1),s=Object(P.a)(u,2),d=s[0],m=s[1],f=Object(n.useState)(o),p=Object(P.a)(f,2),E=p[0],b=p[1],O=function(e){var t=e.target.dataset,a=t.title,n=t.value;return b(a),m(!1),r?r(n):null},v=Object(n.useCallback)((function(){return m(!d)}),[d]);return c.a.createElement("div",{className:"custom-select ".concat(i," ").concat(d?"open":"")},c.a.createElement("div",Object.assign({role:"button",tabIndex:0,className:"active-value",onClick:v},l),E),c.a.createElement("div",{className:"options"},t.length>0&&t.map((function(e){var t=e.id,a=e.title,n=e.value;return c.a.createElement("div",{key:t,role:"button",tabIndex:0,className:"option",onClick:O,"data-value":n,"data-title":a},a)}))))})),F=[{id:"high",title:"High",value:"high"},{id:"medium",title:"Medium",value:"medium"},{id:"low",title:"Low",value:"low"}],M=Object(l.b)()((function(e){var t=e.dispatch,a=Object(n.useState)(""),r=Object(P.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)("medium"),u=Object(P.a)(o,2),s=u[0],d=u[1];return c.a.createElement("form",{className:"new-todo-form",onSubmit:function(e){e.preventDefault(),t(function(e){var t=e.title,a=e.priority;return function(e){A(e,(function(){return w.createTodo({title:t,priority:a})}),(function(t){var a=t.data;return e({type:"ADD_TODO",payload:a})}))}}({title:i,priority:s})),l("")}},c.a.createElement(R,{type:"text",className:"new-todo-input",placeholder:"Add a new task",onChange:function(e){var t=e.target.value;l(t)},value:i}),c.a.createElement(V,{options:F,defaultValue:"Medium",onChange:d,className:"priority-select ".concat(i?"":"hidden")}))})),B=c.a.memo((function(e){var t=e.className,a=void 0===t?"":t,n=e.isChecked,r=Object(G.a)(e,["className","isChecked"]);return c.a.createElement("input",Object.assign({type:"checkbox",checked:n,className:"custom-checkbox ".concat(a)},r))})),Y=Object(l.b)()((function(e){var t=e.taskId,a=e.defaultValue,r=e.toggleEditing,i=e.dispatch,l=Object(n.useState)(a),o=Object(P.a)(l,2),u=o[0],s=o[1],m=Object(n.useRef)(null);Object(n.useEffect)((function(){m.current.focus()}),[]);return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i(function(e){var t=e.id,a=e.newValue;return function(e,n){var c=n().todos.tasks.find((function(e){return e.id===t}));void 0!==c&&A(e,(function(){return w.updateTodo(Object(d.a)({},c,{title:a}))}),(function(){return e({type:"EDIT_TODO",payload:{id:t,newValue:a}})}))}}({id:t,newValue:u})),r(!1)},className:"edit-todo-form"},c.a.createElement("input",{ref:m,className:"edit-todo-input",value:u,onChange:function(e){var t=e.target.value;s(t)}}))})),x=Object(l.b)()((function(e){var t=e.taskId,a=e.dispatch;return c.a.createElement("button",{type:"button",onClick:function(){var e;a((e=t,function(t){A(t,(function(){return w.deleteTodo(e)}),(function(e){var a=e.data;return t({type:"DELETE_TODO",payload:a})}))}))},className:"delete-todo-btn"})})),U=Object(l.b)()((function(e){var t=e.data,a=t.id,r=t.title,i=t.completed,l=t.priority,o=e.dispatch,u=Object(n.useState)(!1),s=Object(P.a)(u,2),m=s[0],f=s[1],p=Object(n.useCallback)((function(){f(!0)}),[]),E=Object(n.useCallback)((function(){f(!1)}),[]),b=Object(n.useCallback)((function(){o(function(e){return function(t,a){var n=a().todos.tasks.find((function(t){return t.id===e}));void 0!==n&&A(t,(function(){return w.updateTodo(Object(d.a)({},n,{completed:!n.completed}))}),(function(){return t({type:"TOGGLE_COMPLETED",payload:e})}))}}(a))}),[]);return c.a.createElement("li",{className:"todo-item ".concat(i?"completed":""," ").concat(m?"editing":""),onDoubleClick:p,onBlur:E},m?c.a.createElement(Y,{taskId:a,defaultValue:r,toggleEditing:f}):c.a.createElement("div",{className:"view"},c.a.createElement("div",{className:"toggle-part"},c.a.createElement(B,{className:"toggle-completed-checkbox",isChecked:i,onChange:b})),c.a.createElement("div",{className:"title-part"},c.a.createElement("span",{className:"title"},r),c.a.createElement("span",{className:"priority ".concat(l||"")},l)),c.a.createElement(x,{taskId:a})))})),X=c.a.memo((function(e){var t=e.className,a=void 0===t?"":t,n=e.title,r=e.isDisabled,i=e.outline,l=Object(G.a)(e,["className","title","isDisabled","outline"]);return c.a.createElement("button",Object.assign({type:"button",className:"custom-button ".concat(a," ").concat(i?"outline":""),disabled:r},l),n)})),H=Object(l.b)((function(e){return{countOfUncompleted:C(e),tasks:N(e)}}))((function(e){var t=e.countOfUncompleted,a=e.tasks,r=e.dispatch,i=t>0,l=a.length,o=Object(n.useCallback)((function(){var e;r((e=i,function(t){A(t,(function(){return w.updateAllStatuses(e)}),(function(){return t({type:"TOGGLE_ALL_TODOS_COMPLETED",payload:e})}))}))}),[i]),u=Object(n.useCallback)((function(){r((function(e){A(e,(function(){return w.deleteAllCompleted()}),(function(){return e({type:"DELETE_ALL_COMPLETED"})}))}))}),[]);return c.a.createElement("div",{className:"completed-controls-section"},c.a.createElement("span",{className:"counter"},i?"You have ".concat(t," uncompleted tasks"):""),c.a.createElement(X,{className:"toggle-all-tasks-btn",title:"".concat(i?"Complete all":"Uncomplete all"),onClick:o,outline:!i}),c.a.createElement(X,{className:"delete-completed-btn",title:"Delete completed",isDisabled:t===l,onClick:u}))})),J=c.a.memo((function(e){var t=e.activeFilter,a=[{id:"all",title:"All",filter:"",defaultFilter:void 0===t},{id:"active",title:"Active",filter:"active"},{id:"done",title:"Done",filter:"done"}],r=Object(j.e)(),i=Object(n.useCallback)((function(e){var t=e.target.value;r.push("/".concat(t))}),[r]),l=a.map((function(e){var a=e.id,n=e.title,r=e.filter,l=e.defaultFilter;return c.a.createElement(X,{key:a,title:n,onClick:i,value:r,outline:!l&&t!==r,className:"filter-btn"})}));return c.a.createElement("div",{className:"filter-controls-section"},l)})),q=[{id:"all",title:"All",filter:""},{id:"high",title:"High",filter:"high"},{id:"medium",title:"Medium",filter:"medium"},{id:"low",title:"Low",filter:"low"}],z=Object(l.b)((function(e){return{isSortedByPriority:T(e)}}))((function(e){var t=e.activePriorityFilter,a=e.isSortedByPriority,r=e.dispatch,i=Object(n.useCallback)((function(){r({type:"TOGGLE_SORTING_BY_PRIORITY"})}),[]),l=Object(n.useCallback)((function(e){var t=e.target.value;r({type:"SET_ACTIVE_PRIORITY_FILTER",payload:t})}),[]),o=Object(n.useMemo)((function(){return q.map((function(e){var a=e.id,n=e.title,r=e.filter;return c.a.createElement(X,{key:a,className:"priority-filter-btn ".concat(r||""),title:n,outline:t!==r,value:r,onClick:l})}))}),[t]);return c.a.createElement("div",{className:"priority-controls-section"},c.a.createElement("div",{className:"priority-filters"},o),c.a.createElement(X,{className:"sort-by-priority-btn",onClick:i,title:a?"Sort by time":"Sort by priority",outline:a}))})),K=function(){return c.a.createElement("div",{className:"loading-container"},c.a.createElement("div",{className:"loading-indicator"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)))},Q=Object(l.b)((function(e){return{tasks:L(e),activePriorityFilter:_(e),isLoading:(t=e,t.todos.isLoading)};var t}))((function(e){var t=e.tasks,a=e.activePriorityFilter,r=e.dispatch,i=e.isLoading,l=Object(j.f)().filter;Object(n.useEffect)((function(){r((function(e){A(e,w.getTodos,(function(t){var a=t.data;return e({type:"SAVE_TODOS",payload:a})}))}))}),[]);return c.a.createElement("div",{className:"todo-list-container"},i&&c.a.createElement(K,null),c.a.createElement(M,null),a||t.length>0?c.a.createElement(n.Fragment,null,c.a.createElement("ul",{className:"todo-list"},t.filter((function(e){switch(l){case"done":return e.completed;case"active":return!e.completed;default:return e}})).map((function(e){return c.a.createElement(U,{key:e.id,data:e})}))),c.a.createElement(H,null),c.a.createElement(J,{activeFilter:l}),c.a.createElement(z,{activePriorityFilter:a})):c.a.createElement("h2",{className:"no-todos-title"},"You have not any tasks yet"))})),W=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"container"},c.a.createElement(k,null),c.a.createElement(Q,null),c.a.createElement(h.a,null)))},Z=function(){return c.a.createElement(l.a,{store:v},c.a.createElement(y.a,null,c.a.createElement(j.a,{path:"/:filter?",component:W})))};i.a.render(c.a.createElement(Z,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.ce4e3103.chunk.js.map